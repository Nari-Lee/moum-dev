<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
  <meta charset="UTF-8">
  <title></title>
  <link rel="stylesheet" type="text/css" href="/css/style.css">
</head>

<body>

<div class="overlay" onClick="closePopup();"></div>

<header th:fragment="header">
  <a th:href="@{/}"><img th:src="@{/images/home.gif}" alt="홈"></a>
  <nav>
    <ul>
      <li class="btn"><a th:href="@{/}" onClick="openLoginModal(); return false;">마이홈</a></li>
      <li class="btn"><a th:href="@{/}" onClick="openLoginModal(); return false;">게시판</a></li>
      <li class="btn"><a th:href="@{/}" onClick="openLoginModal(); return false;">수집품거래</a></li>
      <li class="btn"><a th:href="@{/}" onClick="openLoginModal(); return false;">하비위키</a></li>
    </ul>
  </nav>

  <div class="login-state pos-right">
    <th:block th:if="${requestUri != null and requestUri == '/'}">
      <button class="btn btn-join" onclick="openSignupModal();">회원가입</button>
      <button class="btn btn-login" onClick="openLoginModal();">로그인</button>
    </th:block>
    <th:block th:unless="${requestUri != null and requestUri == '/'}">
      <a th:href="@{/myHome}" class="btn">사용자</a>

      <a th:href="@{/}" class="btn btn-logout">로그아웃</a>
    </th:block>

  </div>
</header>

<div id="loginModal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closeLoginModal()">&times;</span>

    <h2>로그인</h2>
    <form th:action="@{/auth/login}" method="post">
      <div>
        <label for="email">이메일:</label>
        <input type="email" id="email" name="email" required>
      </div>
      <div>
        <label for="password">암호:</label>
        <input type="password" id="password" name="password" required>
      </div>
      <div>
        <input type="checkbox" id="saveEmail" name="saveEmail">
        <label for="saveEmail">이메일 저장</label>
      </div>
      <div>
        <button type="submit">로그인</button>
      </div>
    </form>
  </div>
</div>

<div id="signupModal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closeSignupModal()">&times;</span>
    <h2>회원가입</h2>
    <form th:action="@{/user/signup}" method="post">
      <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
      <div>
        <label for="name">이름:</label>
        <input type="text" id="name" name="name" required>
      </div>
      <div>
        <label for="nickname">닉네임:</label>
        <input type="text" id="nickname" name="nickname" required>
      </div>
      <div>
        <label for="signupEmail">이메일:</label>
        <input type="email" id="signupEmail" name="email" required>
      </div>
      <div>
        <label for="signupPassword">비밀번호:</label>
        <input type="password" id="signupPassword" name="password" required>
      </div>
      <div>
        <button type="submit">가입하기</button>
      </div>
    </form>
  </div>
</div>

<script th:fragment="commonjs" src="/js/common.js"></script>

</body>
</html>