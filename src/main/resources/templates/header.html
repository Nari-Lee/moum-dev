<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
  <meta charset="UTF-8">
  <title>모음</title>
  <link rel="stylesheet" type="text/css" href="/css/style.css">
</head>

<body>

  <header th:fragment="header">
    <a th:href="@{/}"><img th:src="@{/images/home.png}" alt="홈"></a>
    <nav>
      <ul>
        <li class="btn"><a th:href="@{/}">마이홈</a></li>
        <li class="btn"><a th:href="@{/}">게시판</a></li>
        <li class="btn"><a th:href="@{/}">수집품거래</a></li>
        <li class="btn"><a th:href="@{/}">하비위키</a></li>
      </ul>
    </nav>

    <div class="login-state pos-right">
      <button class="btn btn-join">회원가입</button>
      <button class="btn btn-login" onClick="openLoginPopup();">로그인</button>

<!--      향후 authentication 설정 후에 다시 테스트-->

<!--      <div th:if="${#authentication.name == 'anonymous'}">-->
<!--        <button class="btn btn-join">회원가입</button>-->
<!--        <button class="btn btn-login" onClick="openLoginPopup();">로그인</button>-->
<!--      </div>-->
<!--      <div th:if="${#authentication.name != 'anonymous'}">-->
<!--        <a th:href="@{/app/user/view(no=${#authentication.principal.no})}" class="btn btn-light"-->
<!--           th:text="${#authentication.principal.name}">사용자 이름</a>-->
<!--        <a th:href="@{/app/auth/logout}" class="btn btn-secondary">로그아웃</a>-->
<!--      </div>-->
    </div>
  </header>

  <div th:fragment="loginPopup" class="overlay" onClick="closePopup();">
    <div class="layer login_layer" onClick="event.stopPropagation();">
      <img class="x" th:src="@{/images/common/x.png}" onClick="closePopup();" alt="닫기">
      <h2>Login</h2>
      <div th:if="${param.error != null}">
        <p style="color: red;">Invalid username or password.</p>
      </div>
      <form th:action="@{/app/myHome}" method="post">
        <div>
          <label for="username">Username:</label>
          <input type="text" id="username" name="username" required>
        </div>
        <div>
          <label for="password">Password:</label>
          <input type="password" id="password" name="password" required>
        </div>
        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
        <button type="submit">Login</button>
      </form>
    </div>
  </div>

  <script th:fragment="commonjs" src="/js/common.js"></script>

</body>
</html>
