<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="_csrf" th:content="${_csrf.token}"/>
    <meta name="_csrf_header" th:content="${_csrf.headerName}"/>
    <title>회원가입</title>
    <link rel="stylesheet" th:href="@{/css/user.css}">
</head>
<body>

<div class="container p-4">
    <h3 class="text-center mb-3 text-primary">환영합니다!</h3>
    <h6 class="text-center mb-4 text-secondary">사용할 아이디 / 비밀번호를 입력하세요</h6>

    <form class="needs-validation" id="signupForm" method="post" novalidate th:action="@{/user/signup}">
        <!-- 닉네임 필드 -->
        <div class="mb-3">
            <label class="form-label" for="nickname">닉네임</label>
            <div class="input-group">
                <input class="form-control rounded-2" id="nickname" name="nickname" required type="text">
                <button class="btn btn-dark ms-2 rounded-2" onclick="checkDuplicate('nickname', document.getElementById('nickname').value)" type="button">중복검사</button>
            </div>
            <div class="form-text" id="nicknameMessage"></div>
        </div>

        <!-- 이메일 필드 -->
        <div class="mb-3">
            <label class="form-label" for="email">이메일</label>
            <div class="input-group">
                <input class="form-control rounded-2" id="email" name="email" required type="email">
                <button class="btn btn-dark ms-2 rounded-2" onclick="checkDuplicate('email', document.getElementById('email').value)" type="button">중복검사</button>
            </div>
            <div class="form-text" id="emailMessage"></div>
        </div>

        <!-- 인증번호 필드 -->
        <div class="mb-3" id="authCodeField" style="display:none;">
            <label class="form-label" for="authCode">인증 코드</label>
            <div class="input-group">
                <input class="form-control rounded-2" id="authCode" name="authCode" type="text">
                <button class="btn btn-dark ms-2 rounded-2" onclick="verifyAuthCode()" type="button">인증확인</button>
            </div>
            <div class="form-text" id="authCodeMessage"></div>
        </div>

        <!-- 비밀번호 필드 -->
        <div class="mb-3">
            <label class="form-label" for="password">비밀번호</label>
            <input class="form-control rounded-2" id="password" name="password" required type="password">
            <span class="form-text mt-1" id="passwordMessage"></span>
        </div>

        <!-- 비밀번호 확인 필드 -->
        <div class="mb-3">
            <label class="form-label" for="confirmPassword">비밀번호 재확인</label>
            <input class="form-control rounded-2" id="confirmPassword" name="confirmPassword" required type="password">
            <span class="form-text mt-1" id="confirmPasswordMessage"></span>
        </div>

        <!-- 에러 메시지 -->
        <div class="error-message text-danger mb-3" style="display: none;" th:if="${param.signupError}">
            회원가입에 실패했습니다. 다시 시도해주세요.
        </div>

        <!-- 제출 버튼 -->
        <div class="d-grid mt-4">
            <button class="btn btn-dark py-2 rounded-2" type="submit">가입하기</button>
        </div>
    </form>
</div>

<link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
<style>
    .container {
        max-width: 500px;
    }
    .form-control {
        padding: 0.7rem;
        border-radius: 4px;
    }
    .form-control:focus {
        box-shadow: none;
        border-color: #ced4da;
    }
    .btn:focus {
        box-shadow: none;
    }
    .btn {
        padding: 0.7rem 1.5rem;
    }
    .form-text {
        display: block;
        font-size: 0.875rem;
    }
    h6 {
        color: #666;
    }
    /* 비밀번호 메시지 스타일 */
    #passwordMessage, #confirmPasswordMessage {
        display: block;
        margin-top: 4px;
    }
    /* 입력창 간격 조정 */
    .form-label {
        margin-bottom: 8px;
        display: block;
    }
    /* 비밀번호 입력창 크기 조정 */
    input[type="password"] {
        width: 100%;
    }
    /* 에러 메시지 스타일 */
    .error-message {
        font-size: 0.875rem;
        text-align: center;
    }
</style>
<script th:src="@{/js/user.js}"></script>
</body>
</html>
